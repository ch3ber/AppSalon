{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","iniciarApp","mostrarServicios","mostrarSeccion","cambiarSeccion","paginaSiguiente","paginaAnterior","botonesPaginador","mostrarResumen","nombreCita","fechaCita","deshabilitarFechaAnterior","horaCita","seccionAnterior","document","querySelector","classList","remove","add","tabAnterior","querySelectorAll","forEach","enlace","addEventListener","event","preventDefault","parseInt","target","dataset","paso","async","resultado","fetch","db","json","servicio","id","precio","nombreServicio","createElement","textContent","precioServicio","servicioDiv","idServicio","onclick","seleccionarServicio","appendChild","error","console","log","elemento","tagName","parentElement","contains","eliminarServicio","agregarServicio","firstElementChild","nextElementSibling","resumenDiv","firstChild","removeChild","Object","values","includes","noServicios","headingCita","innerHTML","serviciosCita","headingServicios","cantidad","contenedorServicio","textoServicio","totalServicio","split","trim","cantidadPagar","filter","servicioObj","nombreTexto","value","length","mostrarAlerta","alerta","mensaje","tipo","setTimeout","fechaInput","dia","Date","getUTCDay","inputFecha","fechaAhora","fechaDeshabilitar","getFullYear","getMonth","getDay","min","inputHora"],"mappings":"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","file":"bundle.min.js","sourcesContent":["let pagina = 1; //pagina en la que se encuentra el usuario\n\nconst cita = {\n   nombre: '',\n   fecha: '',\n   hora: '',\n   servicios: []\n\n}\n\ndocument.addEventListener('DOMContentLoaded', function() {\n   iniciarApp();\n});\n\nfunction iniciarApp() {\n   mostrarServicios();\n\n   //resaltar el DIV actual segun el tab que se presiona\n   mostrarSeccion();\n\n   //ocultar o mostrar una seccion segun el tab que se presiona\n   cambiarSeccion();\n\n   //cabiar entre la pagina siguiente y la anterior\n   paginaSiguiente();\n   paginaAnterior();\n\n   //compureba la pagina actual para ocultar o mostrar la paginacion\n   botonesPaginador();\n\n   //muestra el resumen de la cita (o un mensaje de error en caso de no pasar la validacion)\n   mostrarResumen();\n\n   //almacena el nombre de la cita en el objeto\n   nombreCita();\n\n   //almacena la fecha de la cita en el objeto\n   fechaCita();\n\n   //deshabilita dias pasados\n   deshabilitarFechaAnterior();\n\n   //alamcenar la hora de la cita en el objeto\n   horaCita();\n}\n\nfunction mostrarSeccion() {\n\n   //eliminar mostrar-seccion del elemento anterior\n   const seccionAnterior = document.querySelector('.mostrar-seccion');\n   if (seccionAnterior) {\n      seccionAnterior.classList.remove('mostrar-seccion');\n   }\n\n   const seccionActual = document.querySelector(`#paso-${pagina}`);\n   seccionActual.classList.add('mostrar-seccion');\n\n   //elimina la clase de actual en el tab anterior\n   const tabAnterior = document.querySelector('.tabs .actual');\n   if (tabAnterior) {\n      tabAnterior.classList.remove('actual');\n   }\n\n   //resalta el tab actual\n   const tab = document.querySelector(`[data-paso=\"${pagina}\"]`)\n   tab.classList.add('actual');\n}\n\nfunction cambiarSeccion() {\n   const enlaces = document.querySelectorAll('.tabs button');\n\n   enlaces.forEach(enlace => {\n      enlace.addEventListener('click', event => {\n         event.preventDefault();\n         pagina = parseInt(event.target.dataset.paso);\n\n         //llamar la funcion mostrar seccion\n         mostrarSeccion();\n\n         botonesPaginador();\n      })\n   });\n}\n\nasync function mostrarServicios() {\n   try {\n      const resultado = await fetch('./servicios.json');\n      const db = await resultado.json();\n      const {servicios} = db;\n\n      //generar html\n      servicios.forEach( servicio => {\n         const {id, nombre, precio} = servicio;\n\n         //DOM Scripting\n         //generar nombre del sercivio\n         const nombreServicio = document.createElement('P');\n         nombreServicio.textContent = nombre;\n         nombreServicio.classList.add('nombre-servicio');\n\n         //generar precio del servicio\n         const precioServicio = document.createElement('P');\n         precioServicio.textContent = `$ ${precio}`;\n         precioServicio.classList.add('precio-servicio');\n\n         //generar div contenedor de servicio\n         const servicioDiv = document.createElement('DIV');\n         servicioDiv.classList.add('servicio');\n         servicioDiv.dataset.idServicio = id;\n\n         //selecciona un sercivio para la cita\n         servicioDiv.onclick = seleccionarServicio;\n\n         //inyectar precio y nombre al div servicio\n         servicioDiv.appendChild(nombreServicio);\n         servicioDiv.appendChild(precioServicio);\n\n         //inyerctarlo en HTML\n         document.querySelector('#servicios').appendChild(servicioDiv);\n      });\n   } catch (error) {\n      console.log(error);\n   }\n}\n\nfunction seleccionarServicio(event) {\n   let elemento;\n   //forzar que el elemento al que dimos clik sea el DIV\n   if (event.target.tagName == 'P') {\n      elemento = event.target.parentElement;\n   } else {\n      elemento = event.target;\n   }\n\n   if (elemento.classList.contains('seleccionado')) {\n      elemento.classList.remove('seleccionado');\n      eliminarServicio(parseInt(elemento.dataset.idServicio));\n   } else {\n      elemento.classList.add('seleccionado');\n\n      const servicioObj = {\n         id: parseInt(elemento.dataset.idServicio),\n         nombre: elemento.firstElementChild.textContent,\n         precio: elemento.firstElementChild.nextElementSibling.textContent\n\n      }\n\n      agregarServicio(servicioObj);\n   }\n}\n\nfunction paginaSiguiente() {\n   const paginaSiguiente = document.querySelector('#siguiente');\n   paginaSiguiente.addEventListener('click', () => {\n      pagina++\n\n      botonesPaginador();\n   })\n}\n\nfunction paginaAnterior() {\n   const paginaAnterior = document.querySelector('#anterior');\n   paginaAnterior.addEventListener('click', () => {\n      pagina--\n\n      botonesPaginador();\n   })\n}\n\nfunction botonesPaginador() {\n   const paginaSiguiente = document.querySelector('#siguiente');\n   const paginaAnterior = document.querySelector('#anterior');\n\n   if (pagina === 1) {\n      paginaAnterior.classList.add('ocultar');\n   } else if (pagina === 3) {\n      paginaSiguiente.classList.add('ocultar');\n      paginaAnterior.classList.remove('ocultar');\n\n      mostrarResumen(); //estamos en la pagina 3, carga el resumen de la sita\n   } else {\n      paginaAnterior.classList.remove('ocultar');\n      paginaSiguiente.classList.remove('ocultar');\n   }\n\n   mostrarSeccion(); //cambia la seccion que se muestra por la de la pagina\n}\n\nfunction mostrarResumen() {\n   //destructuring\n   const {nombre, fecha, hora, servicios} = cita;\n\n   //seleccionar el resumen\n   const resumenDiv = document.querySelector('.contenido-resumen')\n\n   //limpiar el HTML\n   while (resumenDiv.firstChild) {\n      resumenDiv.removeChild(resumenDiv.firstChild)\n   }\n\n   //validacion de objeto\n   if (Object.values(cita).includes('')) {\n      const noServicios = document.createElement('P');\n      noServicios.textContent = 'Faltan datos de servicios, hora, fecha o nombre';\n\n      noServicios.classList.add('invalidar-cita');\n\n      //agregar a resumenDiv\n      resumenDiv.appendChild(noServicios);\n\n      return;\n   }\n\n   const headingCita = document.createElement('H3');\n   headingCita.textContent = 'Resumen de Cita';\n\n   //mostrar el resumen\n   const nombreCita = document.createElement('P');\n   nombreCita.innerHTML = `<span>Nombre:</span> ${nombre}`;\n\n   const fechaCita = document.createElement('P');\n   fechaCita.innerHTML = `<span>Fecha:</span> ${fecha}`;\n\n   const horaCita = document.createElement('P');\n   horaCita.innerHTML = `<span>Hora:</span> ${hora}`;\n\n   const serviciosCita = document.createElement('DIV');\n   serviciosCita.classList.add('resumen-servicios');\n\n   const headingServicios = document.createElement('H3');\n   headingServicios.textContent = 'Resumen de Servicios';\n   serviciosCita.appendChild(headingServicios);\n\n   let cantidad = 0;\n\n   //iterar sobre el arreglo de servicios\n   servicios.forEach(servicio => {\n      const {nombre, precio} = servicio;\n      const contenedorServicio = document.createElement('DIV');\n      contenedorServicio.classList.add('contenedor-servicio');\n\n      const textoServicio = document.createElement('P');\n      textoServicio.textContent = nombre;\n\n      const precioServicio = document.createElement('P');\n      precioServicio.textContent = precio;\n      precioServicio.classList.add('precio');\n\n      const totalServicio = precio.split('$');\n      cantidad += parseInt(totalServicio[1].trim());\n      console.log(totalServicio)\n\n      //colocar texto y precio en el div\n      contenedorServicio.appendChild(textoServicio);\n      contenedorServicio.appendChild(precioServicio);\n\n      serviciosCita.appendChild(contenedorServicio);\n   });\n\n   resumenDiv.appendChild(headingCita);\n   resumenDiv.appendChild(nombreCita);\n   resumenDiv.appendChild(fechaCita);\n   resumenDiv.appendChild(horaCita);\n\n   resumenDiv.appendChild(serviciosCita);\n\n   const cantidadPagar = document.createElement('P');\n   cantidadPagar.classList.add('total');\n   cantidadPagar.innerHTML = `<span>Total a Pagar</span> $ ${cantidad}`;\n   resumenDiv.appendChild(cantidadPagar);\n\n}\n\nfunction eliminarServicio(id) {\n   const {servicios} = cita;\n   cita.servicios = servicios.filter( servicio => servicio.id !== id );\n}\n\nfunction agregarServicio(servicioObj) {\n   const {servicios} = cita;\n   cita.servicios = [...servicios, servicioObj];\n}\n\nfunction nombreCita() {\n   const nombreInput = document.querySelector('#nombre');\n\n   nombreInput.addEventListener('input', event => {\n      const nombreTexto = event.target.value;\n\n      if (nombreTexto === '' || nombreTexto.length < 3) {\n         mostrarAlerta('Nombre no valido', 'error');\n      } else {\n         const alerta = document.querySelector('.alerta');\n         if (alerta) {\n            alerta.remove();\n         }\n         cita.nombre = nombreTexto;\n      }\n   })\n}\n\nfunction mostrarAlerta(mensaje, tipo) {\n   //si hay una alerta previa, entonces no crear otra\n   const alertaPrevia = document.querySelector('.alerta');\n   if (alertaPrevia) {\n      return;\n   }\n\n   const alerta = document.createElement('DIV');\n   alerta.textContent = mensaje;\n   alerta.classList.add('alerta');\n\n   if (tipo === 'error') {\n      alerta.classList.add('error');\n   }\n\n   //insertar en el HTML\n   const formulario = document.querySelector('.formulario');\n   formulario.appendChild(alerta);\n\n   //eliminar alerta despues de 3 segundos\n   setTimeout(() => alerta.remove(), 3000)\n}\n\nfunction fechaCita() {\n   const fechaInput = document.querySelector('#fecha');\n   fechaInput.addEventListener('input', event => {\n      const dia = new Date(event.target.value).getUTCDay();\n\n      if ([0, 6].includes(dia)) {\n         event.preventDefault();\n         fechaInput.value = '';\n         mostrarAlerta('Fines de semana no estan permitidos', 'error');\n      } else {\n         cita.fecha = fechaInput.value;\n      }\n   })\n}\n\nfunction deshabilitarFechaAnterior() {\n   const inputFecha = document.querySelector('#fecha');\n   const fechaAhora = new Date();\n   const year = fechaAhora.getFullYear()\n   const mes = fechaAhora.getMonth() + 1;\n   const dia = fechaAhora.getDay() + 1; //no reservar el mismo dia\n   //formato deseado AAAA-MM-DD\n   const fechaDeshabilitar = `${year}-0${mes}-0${dia}`;\n   inputFecha.min = fechaDeshabilitar;\n}\n\nfunction horaCita() {\n   const inputHora = document.querySelector('#hora');\n   inputHora.addEventListener('input', event => {\n\n      const horaCita = event.target.value;\n      const hora = horaCita.split(':');\n      if (hora[0] < 10 || hora[1] > 18) {\n         mostrarAlerta('Hora no valida', 'error');\n         setTimeout(() => inputHora.value = '', 3000);\n      } else {\n         cita.hora = horaCita;\n      }\n   })\n}\n"]}