{"version":3,"sources":["app.js"],"names":["pagina","cita","nombre","fecha","hora","servicios","iniciarApp","mostrarServicios","mostrarSeccion","cambiarSeccion","paginaSiguiente","paginaAnterior","botonesPaginador","mostrarResumen","nombreCita","fechaCita","deshabilitarFechaAnterior","horaCita","seccionAnterior","document","querySelector","classList","remove","add","tabAnterior","querySelectorAll","forEach","enlace","addEventListener","event","preventDefault","parseInt","target","dataset","paso","async","resultado","fetch","db","json","servicio","id","precio","nombreServicio","createElement","textContent","precioServicio","servicioDiv","idServicio","onclick","seleccionarServicio","appendChild","error","console","log","elemento","tagName","parentElement","contains","eliminarServicio","agregarServicio","firstElementChild","nextElementSibling","resumenDiv","firstChild","removeChild","Object","values","includes","noServicios","innerHTML","filter","servicioObj","nombreTexto","value","length","mostrarAlerta","alerta","mensaje","tipo","setTimeout","fechaInput","dia","Date","getUTCDay","inputFecha","fechaAhora","fechaDeshabilitar","getFullYear","getMonth","getDay","min","inputHora","split"],"mappings":"AAAA,IAAAA,OAAA,EAEA,MAAAC,KAAA,CACAC,OAAA,GACAC,MAAA,GACAC,KAAA,GACAC,UAAA,IAQA,SAAAC,aACAC,mBAGAC,iBAGAC,iBAGAC,kBACAC,iBAGAC,mBAGAC,iBAGAC,aAGAC,YAGAC,4BAGAC,WAGA,SAAAT,iBAGA,MAAAU,EAAAC,SAAAC,cAAA,oBACAF,GACAA,EAAAG,UAAAC,OAAA,mBAGAH,SAAAC,cAAA,SAAApB,QACAqB,UAAAE,IAAA,mBAGA,MAAAC,EAAAL,SAAAC,cAAA,iBACAI,GACAA,EAAAH,UAAAC,OAAA,UAIAH,SAAAC,cAAA,eAAApB,YACAqB,UAAAE,IAAA,UAGA,SAAAd,iBACAU,SAAAM,iBAAA,gBAEAC,QAAAC,IACAA,EAAAC,iBAAA,QAAAC,IACAA,EAAAC,iBACA9B,OAAA+B,SAAAF,EAAAG,OAAAC,QAAAC,MAGA1B,iBAEAI,uBAKAuB,eAAA5B,mBACA,IACA,MAAA6B,QAAAC,MAAA,oBACAC,QAAAF,EAAAG,QACAlC,UAAAA,GAAAiC,EAGAjC,EAAAqB,QAAAc,IACA,MAAAC,GAAAA,EAAAvC,OAAAA,EAAAwC,OAAAA,GAAAF,EAIAG,EAAAxB,SAAAyB,cAAA,KACAD,EAAAE,YAAA3C,EACAyC,EAAAtB,UAAAE,IAAA,mBAGA,MAAAuB,EAAA3B,SAAAyB,cAAA,KACAE,EAAAD,YAAA,KAAAH,EACAI,EAAAzB,UAAAE,IAAA,mBAGA,MAAAwB,EAAA5B,SAAAyB,cAAA,OACAG,EAAA1B,UAAAE,IAAA,YACAwB,EAAAd,QAAAe,WAAAP,EAGAM,EAAAE,QAAAC,oBAGAH,EAAAI,YAAAR,GACAI,EAAAI,YAAAL,GAGA3B,SAAAC,cAAA,cAAA+B,YAAAJ,KAEA,MAAAK,GACAC,QAAAC,IAAAF,IAIA,SAAAF,oBAAArB,GACA,IAAA0B,EAQA,GALAA,EADA,KAAA1B,EAAAG,OAAAwB,QACA3B,EAAAG,OAAAyB,cAEA5B,EAAAG,OAGAuB,EAAAlC,UAAAqC,SAAA,gBACAH,EAAAlC,UAAAC,OAAA,gBACAqC,iBAAA5B,SAAAwB,EAAAtB,QAAAe,iBACA,CACAO,EAAAlC,UAAAE,IAAA,gBASAqC,gBAPA,CACAnB,GAAAV,SAAAwB,EAAAtB,QAAAe,YACA9C,OAAAqD,EAAAM,kBAAAhB,YACAH,OAAAa,EAAAM,kBAAAC,mBAAAjB,eAQA,SAAAnC,kBACAS,SAAAC,cAAA,cACAQ,iBAAA,QAAA,KACA5B,SAEAY,qBAIA,SAAAD,iBACAQ,SAAAC,cAAA,aACAQ,iBAAA,QAAA,KACA5B,SAEAY,qBAIA,SAAAA,mBACA,MAAAF,EAAAS,SAAAC,cAAA,cACAT,EAAAQ,SAAAC,cAAA,aAEA,IAAApB,OACAW,EAAAU,UAAAE,IAAA,WACA,IAAAvB,QACAU,EAAAW,UAAAE,IAAA,WACAZ,EAAAU,UAAAC,OAAA,WAEAT,mBAEAF,EAAAU,UAAAC,OAAA,WACAZ,EAAAW,UAAAC,OAAA,YAGAd,iBAGA,SAAAK,iBAEA,MAAAX,OAAAA,EAAAC,MAAAA,EAAAC,KAAAA,EAAAC,UAAAA,GAAAJ,KAGA8D,EAAA5C,SAAAC,cAAA,sBAGA,KAAA2C,EAAAC,YACAD,EAAAE,YAAAF,EAAAC,YAIA,GAAAE,OAAAC,OAAAlE,MAAAmE,SAAA,IAAA,CACA,MAAAC,EAAAlD,SAAAyB,cAAA,KAQA,OAPAyB,EAAAxB,YAAA,kDAEAwB,EAAAhD,UAAAE,IAAA,uBAGAwC,EAAAZ,YAAAkB,GAMA,MAAAvD,EAAAK,SAAAyB,cAAA,KACA9B,EAAAwD,UAAA,wBAAApE,EAEA,MAAAa,EAAAI,SAAAyB,cAAA,KACA7B,EAAAuD,UAAA,uBAAAnE,EAEA,MAAAc,EAAAE,SAAAyB,cAAA,KACA3B,EAAAqD,UAAA,sBAAAlE,EAEA2D,EAAAZ,YAAArC,GACAiD,EAAAZ,YAAApC,GACAgD,EAAAZ,YAAAlC,GAIA,SAAA0C,iBAAAlB,GACA,MAAApC,UAAAA,GAAAJ,KACAA,KAAAI,UAAAA,EAAAkE,OAAA/B,GAAAA,EAAAC,KAAAA,GAGA,SAAAmB,gBAAAY,GACA,MAAAnE,UAAAA,GAAAJ,KACAA,KAAAI,UAAA,IAAAA,EAAAmE,GAGA,SAAA1D,aACAK,SAAAC,cAAA,WAEAQ,iBAAA,QAAAC,IACA,MAAA4C,EAAA5C,EAAAG,OAAA0C,MAEA,GAAA,KAAAD,GAAAA,EAAAE,OAAA,EACAC,cAAA,mBAAA,aACA,CACA,MAAAC,EAAA1D,SAAAC,cAAA,WACAyD,GACAA,EAAAvD,SAEArB,KAAAC,OAAAuE,KAKA,SAAAG,cAAAE,EAAAC,GAGA,GADA5D,SAAAC,cAAA,WAEA,OAGA,MAAAyD,EAAA1D,SAAAyB,cAAA,OACAiC,EAAAhC,YAAAiC,EACAD,EAAAxD,UAAAE,IAAA,UAEA,UAAAwD,GACAF,EAAAxD,UAAAE,IAAA,SAIAJ,SAAAC,cAAA,eACA+B,YAAA0B,GAGAG,WAAA,IAAAH,EAAAvD,SAAA,KAGA,SAAAP,YACA,MAAAkE,EAAA9D,SAAAC,cAAA,UACA6D,EAAArD,iBAAA,QAAAC,IACA,MAAAqD,EAAA,IAAAC,KAAAtD,EAAAG,OAAA0C,OAAAU,YAEA,CAAA,EAAA,GAAAhB,SAAAc,IACArD,EAAAC,iBACAmD,EAAAP,MAAA,GACAE,cAAA,sCAAA,UAEA3E,KAAAE,MAAA8E,EAAAP,QAKA,SAAA1D,4BACA,MAAAqE,EAAAlE,SAAAC,cAAA,UACAkE,EAAA,IAAAH,KAKAI,EAAA,GAJAD,EAAAE,kBACAF,EAAAG,WAAA,MACAH,EAAAI,SAAA,IAGAL,EAAAM,IAAAJ,EAGA,SAAAtE,WACA,MAAA2E,EAAAzE,SAAAC,cAAA,SACAwE,EAAAhE,iBAAA,QAAAC,IAEA,MAAAZ,EAAAY,EAAAG,OAAA0C,MACAtE,EAAAa,EAAA4E,MAAA,KACAzF,EAAA,GAAA,IAAAA,EAAA,GAAA,IACAwE,cAAA,iBAAA,SACAI,WAAA,IAAAY,EAAAlB,MAAA,GAAA,OAEAzE,KAAAG,KAAAa,EACAoC,QAAAC,IAAA,gBAEAD,QAAAC,IAAArC,KArTAE,SAAAS,iBAAA,oBAAA,WACAtB","file":"bundle.min.js","sourcesContent":["let pagina = 1; //pagina en la que se encuentra el usuario\n\nconst cita = {\n   nombre: '',\n   fecha: '',\n   hora: '',\n   servicios: []\n\n}\n\ndocument.addEventListener('DOMContentLoaded', function() {\n   iniciarApp();\n});\n\nfunction iniciarApp() {\n   mostrarServicios();\n\n   //resaltar el DIV actual segun el tab que se presiona\n   mostrarSeccion();\n\n   //ocultar o mostrar una seccion segun el tab que se presiona\n   cambiarSeccion();\n\n   //cabiar entre la pagina siguiente y la anterior\n   paginaSiguiente();\n   paginaAnterior();\n\n   //compureba la pagina actual para ocultar o mostrar la paginacion\n   botonesPaginador();\n\n   //muestra el resumen de la cita (o un mensaje de error en caso de no pasar la validacion)\n   mostrarResumen();\n\n   //almacena el nombre de la cita en el objeto\n   nombreCita();\n\n   //almacena la fecha de la cita en el objeto\n   fechaCita();\n\n   //deshabilita dias pasados\n   deshabilitarFechaAnterior();\n\n   //alamcenar la hora de la cita en el objeto\n   horaCita();\n}\n\nfunction mostrarSeccion() {\n\n   //eliminar mostrar-seccion del elemento anterior\n   const seccionAnterior = document.querySelector('.mostrar-seccion');\n   if (seccionAnterior) {\n      seccionAnterior.classList.remove('mostrar-seccion');\n   }\n\n   const seccionActual = document.querySelector(`#paso-${pagina}`);\n   seccionActual.classList.add('mostrar-seccion');\n\n   //elimina la clase de actual en el tab anterior\n   const tabAnterior = document.querySelector('.tabs .actual');\n   if (tabAnterior) {\n      tabAnterior.classList.remove('actual');\n   }\n\n   //resalta el tab actual\n   const tab = document.querySelector(`[data-paso=\"${pagina}\"]`)\n   tab.classList.add('actual');\n}\n\nfunction cambiarSeccion() {\n   const enlaces = document.querySelectorAll('.tabs button');\n\n   enlaces.forEach(enlace => {\n      enlace.addEventListener('click', event => {\n         event.preventDefault();\n         pagina = parseInt(event.target.dataset.paso);\n\n         //llamar la funcion mostrar seccion\n         mostrarSeccion();\n\n         botonesPaginador();\n      })\n   });\n}\n\nasync function mostrarServicios() {\n   try {\n      const resultado = await fetch('./servicios.json');\n      const db = await resultado.json();\n      const {servicios} = db;\n\n      //generar html\n      servicios.forEach( servicio => {\n         const {id, nombre, precio} = servicio;\n\n         //DOM Scripting\n         //generar nombre del sercivio\n         const nombreServicio = document.createElement('P');\n         nombreServicio.textContent = nombre;\n         nombreServicio.classList.add('nombre-servicio');\n\n         //generar precio del servicio\n         const precioServicio = document.createElement('P');\n         precioServicio.textContent = `$ ${precio}`;\n         precioServicio.classList.add('precio-servicio');\n\n         //generar div contenedor de servicio\n         const servicioDiv = document.createElement('DIV');\n         servicioDiv.classList.add('servicio');\n         servicioDiv.dataset.idServicio = id;\n\n         //selecciona un sercivio para la cita\n         servicioDiv.onclick = seleccionarServicio;\n\n         //inyectar precio y nombre al div servicio\n         servicioDiv.appendChild(nombreServicio);\n         servicioDiv.appendChild(precioServicio);\n\n         //inyerctarlo en HTML\n         document.querySelector('#servicios').appendChild(servicioDiv);\n      });\n   } catch (error) {\n      console.log(error);\n   }\n}\n\nfunction seleccionarServicio(event) {\n   let elemento;\n   //forzar que el elemento al que dimos clik sea el DIV\n   if (event.target.tagName == 'P') {\n      elemento = event.target.parentElement;\n   } else {\n      elemento = event.target;\n   }\n\n   if (elemento.classList.contains('seleccionado')) {\n      elemento.classList.remove('seleccionado');\n      eliminarServicio(parseInt(elemento.dataset.idServicio));\n   } else {\n      elemento.classList.add('seleccionado');\n\n      const servicioObj = {\n         id: parseInt(elemento.dataset.idServicio),\n         nombre: elemento.firstElementChild.textContent,\n         precio: elemento.firstElementChild.nextElementSibling.textContent\n\n      }\n\n      agregarServicio(servicioObj);\n   }\n}\n\nfunction paginaSiguiente() {\n   const paginaSiguiente = document.querySelector('#siguiente');\n   paginaSiguiente.addEventListener('click', () => {\n      pagina++\n\n      botonesPaginador();\n   })\n}\n\nfunction paginaAnterior() {\n   const paginaAnterior = document.querySelector('#anterior');\n   paginaAnterior.addEventListener('click', () => {\n      pagina--\n\n      botonesPaginador();\n   })\n}\n\nfunction botonesPaginador() {\n   const paginaSiguiente = document.querySelector('#siguiente');\n   const paginaAnterior = document.querySelector('#anterior');\n\n   if (pagina === 1) {\n      paginaAnterior.classList.add('ocultar');\n   } else if (pagina === 3) {\n      paginaSiguiente.classList.add('ocultar');\n      paginaAnterior.classList.remove('ocultar');\n\n      mostrarResumen(); //estamos en la pagina 3, carga el resumen de la sita\n   } else {\n      paginaAnterior.classList.remove('ocultar');\n      paginaSiguiente.classList.remove('ocultar');\n   }\n\n   mostrarSeccion(); //cambia la seccion que se muestra por la de la pagina\n}\n\nfunction mostrarResumen() {\n   //destructuring\n   const {nombre, fecha, hora, servicios} = cita;\n\n   //seleccionar el resumen\n   const resumenDiv = document.querySelector('.contenido-resumen')\n\n   //limpiar el HTML\n   while (resumenDiv.firstChild) {\n      resumenDiv.removeChild(resumenDiv.firstChild)\n   }\n\n   //validacion de objeto\n   if (Object.values(cita).includes('')) {\n      const noServicios = document.createElement('P');\n      noServicios.textContent = 'Faltan datos de servicios, hora, fecha o nombre';\n\n      noServicios.classList.add('invalidar-cita');\n\n      //agregar a resumenDiv\n      resumenDiv.appendChild(noServicios);\n\n      return;\n   }\n\n   //mostrar el resumen\n   const nombreCita = document.createElement('P');\n   nombreCita.innerHTML = `<span>Nombre:</span> ${nombre}`;\n\n   const fechaCita = document.createElement('P');\n   fechaCita.innerHTML = `<span>Fecha:</span> ${fecha}`;\n\n   const horaCita = document.createElement('P');\n   horaCita.innerHTML = `<span>Hora:</span> ${hora}`;\n\n   resumenDiv.appendChild(nombreCita);\n   resumenDiv.appendChild(fechaCita);\n   resumenDiv.appendChild(horaCita);\n\n}\n\nfunction eliminarServicio(id) {\n   const {servicios} = cita;\n   cita.servicios = servicios.filter( servicio => servicio.id !== id );\n}\n\nfunction agregarServicio(servicioObj) {\n   const {servicios} = cita;\n   cita.servicios = [...servicios, servicioObj];\n}\n\nfunction nombreCita() {\n   const nombreInput = document.querySelector('#nombre');\n\n   nombreInput.addEventListener('input', event => {\n      const nombreTexto = event.target.value;\n\n      if (nombreTexto === '' || nombreTexto.length < 3) {\n         mostrarAlerta('Nombre no valido', 'error');\n      } else {\n         const alerta = document.querySelector('.alerta');\n         if (alerta) {\n            alerta.remove();\n         }\n         cita.nombre = nombreTexto;\n      }\n   })\n}\n\nfunction mostrarAlerta(mensaje, tipo) {\n   //si hay una alerta previa, entonces no crear otra\n   const alertaPrevia = document.querySelector('.alerta');\n   if (alertaPrevia) {\n      return;\n   }\n\n   const alerta = document.createElement('DIV');\n   alerta.textContent = mensaje;\n   alerta.classList.add('alerta');\n\n   if (tipo === 'error') {\n      alerta.classList.add('error');\n   }\n\n   //insertar en el HTML\n   const formulario = document.querySelector('.formulario');\n   formulario.appendChild(alerta);\n\n   //eliminar alerta despues de 3 segundos\n   setTimeout(() => alerta.remove(), 3000)\n}\n\nfunction fechaCita() {\n   const fechaInput = document.querySelector('#fecha');\n   fechaInput.addEventListener('input', event => {\n      const dia = new Date(event.target.value).getUTCDay();\n\n      if ([0, 6].includes(dia)) {\n         event.preventDefault();\n         fechaInput.value = '';\n         mostrarAlerta('Fines de semana no estan permitidos', 'error');\n      } else {\n         cita.fecha = fechaInput.value;\n      }\n   })\n}\n\nfunction deshabilitarFechaAnterior() {\n   const inputFecha = document.querySelector('#fecha');\n   const fechaAhora = new Date();\n   const year = fechaAhora.getFullYear()\n   const mes = fechaAhora.getMonth() + 1;\n   const dia = fechaAhora.getDay() + 1; //no reservar el mismo dia\n   //formato deseado AAAA-MM-DD\n   const fechaDeshabilitar = `${year}-0${mes}-0${dia}`;\n   inputFecha.min = fechaDeshabilitar;\n}\n\nfunction horaCita() {\n   const inputHora = document.querySelector('#hora');\n   inputHora.addEventListener('input', event => {\n\n      const horaCita = event.target.value;\n      const hora = horaCita.split(':');\n      if (hora[0] < 10 || hora[1] > 18) {\n         mostrarAlerta('Hora no valida', 'error');\n         setTimeout(() => inputHora.value = '', 3000);\n      } else {\n         cita.hora = horaCita;\n         console.log('hora valida')\n      }\n      console.log(horaCita)\n   })\n}\n"]}